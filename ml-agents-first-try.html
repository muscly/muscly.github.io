<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

<style>
  :root {
    font-size: 20px;
  }
</style>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3B8EKKV9YC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3B8EKKV9YC');
</script>

  <title>ML Agents로 점프 플레이어 AI 만들기&nbsp;|&nbsp;No Secret Wiki Database</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="ML Agents로 점프 플레이어 AI 만들기">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="happiness .html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>행복</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <h1 class="Header__Title">ML Agents로 점프 플레이어 AI 만들기</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Fri, Jun 24, 2022</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--pink">
            <a href="tag/아들과 2인개발.html">아들과 2인개발</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--default">
            <a href="tag/유니티3D.html">유니티3D</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--red">
            <a href="tag/ML Agent.html">ML Agent</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/141d4f2952234d9d9611f14e640ce5c6" class="PageRoot"><div id="https://www.notion.so/8f5acef8a10544928576d1bbc5e32c7f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">다음에 만들 게임을 정하기 위해 여러 가지 프로토타입을 만들고 있습니다. 기발한 아이디어가 떠올라서 흥분한 마음으로 프로토타입을 하면 이내 여러 가지 문제가 발견되곤 합니다. 이런 패턴의 반복입니다. 그래서 몇 가지 원칙을 정했습니다. </span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/9e9ad6bfba67435a9f0365414f66fa12" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">첫째, 아들이 재밌게 플레이할 수 있는 게임을 만들자. 그러면 다른 초등학생들도 재밌게 플레이 할 것이다.</span></span></li><li id="https://www.notion.so/ac4c9573cf4141e4853bc5213ba9a69a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">둘째, 무조건 머신 러닝이 사용되어야 한다.</span></span></li><li id="https://www.notion.so/d45d39b3cd70422691ed552b9348f648" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">셋째, 인게임의 오리지널리티보다는 완성된 아웃게임에 신경쓴다.</span></span></li></ul><div id="https://www.notion.so/fc7ebb047eb24a9fa25bb6b6a286ea43" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">이런 원칙에 맞추어서 처음 프로토타이핑해본 것이 바로 벽점프 게임입니다. 일단 AI가 플레이어를 사람처럼 조작할 수 있는 것을 목표로 ML Agents를 공부해보고 있습니다.</span></span></p></div><div></div><h1 id="https://www.notion.so/0ade479cc238495ca6d3c4cddd74577d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/0ade479cc238495ca6d3c4cddd74577d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">유니티는 잘 알아도 강화학습 모르는 사람들을 위한 개요</span></span></h1><div id="https://www.notion.so/ee143a75db004ad78990710b479f438e" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">💡</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">주의! 저도 머신러닝 초보자입니다! 그러나 초보자 시절에 글을 써야 초보자가 뭘 모르는지 잘 알 수 있다는 생각에 적어봅니다.</span></span></p></div><div id="https://www.notion.so/d7dcdb88f8ac414a9e2bbbdf34390abd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">보통의 프로그래밍은 컴퓨터에게 시킬 일을 ‘이거하고나서 저거해라’ 라는 식으로 명령을 내리는 방식이죠. 반면 머신 러닝은 이런 입력이 있을때 이런 출력이 나오면 좋겠어 라고 말하면 방대한 데이터를 기반으로 모델이 스스로 학습을 하면서 그것이 가능해지게 만듭니다. </span></span></p></div><div id="https://www.notion.so/7779d5c403d94c94a6f1002a49a611d6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">강화학습에서는 AI에게 주변 환경에 대한 정보(=관찰)을 넘기면 AI는 특정 행동(=액션)을 하고 우리는 그 행동에 대한 보상을 줍니다. 수 많은 훈련 세션을 통해서 AI는 더 많은 보상을 얻기 위해서 어떤 행동을 하면 좋을지 학습하게됩니다.</span></span></p></div><div id="https://www.notion.so/3a04a584bfbd4f6ebd73550aef96c432" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">이렇게 학습된 결과로 모델이 만들어지고, 유저에게 게임을 서비스 할 때는 이 모델을 탑재해서 AI가 상황에 맞는 행동을 하게 합니다.</span></span></p></div><h1 id="https://www.notion.so/8fec218b5a934b07beb3dfe8ac0aa2f2" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/8fec218b5a934b07beb3dfe8ac0aa2f2"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">설치</span></span></h1><div id="https://www.notion.so/f51165e6971844eb9fd79954be74f4ce" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ML Agents 공식 매뉴얼은 여기입니다.</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/21be09cdcb3f4f21872e6ff80496c091" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/Unity-Technologies/ml-agents/blob/main/docs/Installation.md">https://github.com/Unity-Technologies/ml-agents/blob/main/docs/Installation.md</a></span></span></li></ul><div id="https://www.notion.so/c1f90f897b5c404eb61767cbeecaa87c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/76949710e802471386d67265ff97c8d2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">제가 설치한 버전을 기준으로 설명합니다.</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/e72743dc7d0e4b18b8cf6bd1ab6069b1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">유니티 패키지 매니저에서 ML Agents 패키지 설치 (2.0.1)</span></span></li><li id="https://www.notion.so/0d213711fbff4c38b33c7a47aec92c5b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">ml-agents 파이선 패키지 설치 (0.26.0)</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/bf0d2d0555634580b447497878b3ece5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">유니티 패키지 버전과 매칭되는 파이선 패키지 버전은 여기서 찾기 ⇒ </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/Unity-Technologies/ml-agents/releases">https://github.com/Unity-Technologies/ml-agents/releases</a></span></span></li><li id="https://www.notion.so/3d12bd1df1bc4fed910eb1b82fef836a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Anaconda를 사용하는 경우에는 이렇게 설치하면 됩니다. (파이선 3.7 사용)</span></span></li></ul><pre id="https://www.notion.so/99296fbe0f9e433bae9f07169554c230" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>$ conda create --name AstroJump <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.7</span>
$ conda activate AstroJump
<span class="token punctuation">(</span>AstroJump<span class="token punctuation">)</span>$ pip <span class="token function">install</span> <span class="token assign-left variable">mlagents</span><span class="token operator">==</span><span class="token number">0.26</span>.0</span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/a9ee76768b2b4410b9940c54e460fc50" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">윈도우즈에서는 pytorch를 별도로 설치해야 해요.</span></span></li></ul><pre id="https://www.notion.so/3c0f531eae5849aa80321b60118ec6bd" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token punctuation">(</span>AstroJump<span class="token punctuation">)</span>$ pip3 <span class="token function">install</span> torch~<span class="token operator">=</span><span class="token number">1.7</span>.1 -f https://download.pytorch.org/whl/torch_stable.html</span></span></span></code></pre></li></ul><h1 id="https://www.notion.so/7eee22c8e28c4e54985ae68dc20eaca8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/7eee22c8e28c4e54985ae68dc20eaca8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">구현</span></span></h1><div id="https://www.notion.so/fa4469cd5772454c962c0d4fb0ad58be" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">어떤 구현을 해야되는지 리스팅만 해보겠습니다.</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/6590b24252c640f39e72f15cbd089d13" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">빨간 큐브를 움직이는 PlayerController가 Agent 상속하게 합니다.</span></span></li><li id="https://www.notion.so/65d84c25b9c54637a8b2a4e17473e8d4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Initialize()에서 초기화를 합니다. Awake() 대신 사용하면 됩니다.</span></span></li><li id="https://www.notion.so/53ebf04d371b41d88bc587da87f56f4e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">OnEpisodeBegin()에서 모든 게임을 리셋하고 재시작. (새로운 훈련이 시작되는 콜백입니다).</span></span></li><li id="https://www.notion.so/50b994ee2bc34dc0a0c5f6777652d276" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">OnActionReceived()에서 플레이어 조작. 저는 점프하느냐 마느냐 하나 밖에 없어요.</span></span></li><li id="https://www.notion.so/4f1abe9ac7ea4d8a86a307f1fe90df17" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">CollectObservation()에서 주변 내용 관찰한 것 입력합니다. 플레이어의 위치, 속도, 벽에 붙었는지 등등을 입력했어요.</span></span></li><li id="https://www.notion.so/dcb75c0daba5451ead75c0c8d2232531" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Heuristic()에 수동 조작 코드 추가합니다. 여기서 채운 Action이 OnActionReceived()로 갑니다.</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/73fe415e3d904689a88aec032b5c1ae2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Agent의 인스펙터에서 AI가 제어하게 하거나, 수동 조작하게 설정할 수 있습니다. 수동 조작하게 설정하면 이 함수가 실행되어서 우리가 AI 대신에 Action을 선택할 수 있어요.</span></span></li></ul></li><li id="https://www.notion.so/458ad798499445fcb15f71ccfaf341ba" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">의미있는 행동을 했을 때 AddReward() 호출해서 보상을 합니다.</span></span></li></ul><h1 id="https://www.notion.so/9a43035746d6404ebb86d3f1b8a6be9d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/9a43035746d6404ebb86d3f1b8a6be9d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">유니티 설정</span></span></h1><ul class="BulletedListWrapper"><li id="https://www.notion.so/38b96972bd444799a7a3e8805bc385c5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">BehaviourParameters 컴포넌트를 추가해서 Action과 Observation 스페이스에 대해 설정합니다. Action의 개수와 Observation의 개수를 코드에서 준 것과 동일하게 설정하는게 중요합니다.</span></span></li><li id="https://www.notion.so/5181f784fa94485b9915b84eba21a5eb" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">DecisionRequester 컴포넌트를 추가해서 Action이 발생하게 합니다.</span></span></li><li id="https://www.notion.so/e3f0ec9c01b741fb90f7762e0700dc96" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">플레이어의 자식으로 자식에 RayPerceptionSendor3D 를 추가. 주변의 사물을 Raycast를 통해 인식할 수 있게 도와주는 컴포넌트입니다. 직접 구현해서 Observation을 제공해도 되지만, 사용하면 편리합니다.</span></span></li></ul><h1 id="https://www.notion.so/04a66875e66a42bc84b718a4909010f1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/04a66875e66a42bc84b718a4909010f1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">학습</span></span></h1><ul class="BulletedListWrapper"><li id="https://www.notion.so/37b7c15fa35b431e93b0741edc859899" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">학습 설정 파일을 준비합니다. 유니티 예제를 가져와서 살짝 고쳤습니다. 저도 설정이 어떤 의미인지 잘 모르고 쓴 것이니 참고만 하세요.</span></span></li></ul><pre id="https://www.notion.so/f900265ee942449dbcb35f92b1d528a6" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token key atrule">behaviors</span><span class="token punctuation">:</span>
  <span class="token key atrule">AstroJump</span><span class="token punctuation">:</span>
    <span class="token key atrule">trainer_type</span><span class="token punctuation">:</span> ppo
    <span class="token key atrule">hyperparameters</span><span class="token punctuation">:</span>
      <span class="token key atrule">batch_size</span><span class="token punctuation">:</span> <span class="token number">32</span>
      <span class="token key atrule">buffer_size</span><span class="token punctuation">:</span> <span class="token number">256</span>
      <span class="token key atrule">learning_rate</span><span class="token punctuation">:</span> <span class="token number">0.003</span>
      <span class="token key atrule">beta</span><span class="token punctuation">:</span> <span class="token number">0.01</span>
      <span class="token key atrule">epsilon</span><span class="token punctuation">:</span> <span class="token number">0.2</span>
      <span class="token key atrule">lambd</span><span class="token punctuation">:</span> <span class="token number">0.95</span>
      <span class="token key atrule">num_epoch</span><span class="token punctuation">:</span> <span class="token number">3</span>
      <span class="token key atrule">learning_rate_schedule</span><span class="token punctuation">:</span> linear
    <span class="token key atrule">network_settings</span><span class="token punctuation">:</span>
      <span class="token key atrule">normalize</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">hidden_units</span><span class="token punctuation">:</span> <span class="token number">20</span>
      <span class="token key atrule">num_layers</span><span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token key atrule">vis_encode_type</span><span class="token punctuation">:</span> simple
    <span class="token key atrule">reward_signals</span><span class="token punctuation">:</span>
      <span class="token key atrule">extrinsic</span><span class="token punctuation">:</span>
        <span class="token key atrule">gamma</span><span class="token punctuation">:</span> <span class="token number">0.9</span>
        <span class="token key atrule">strength</span><span class="token punctuation">:</span> <span class="token number">1.0</span>
    <span class="token key atrule">keep_checkpoints</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">max_steps</span><span class="token punctuation">:</span> <span class="token number">500000</span>
    <span class="token key atrule">time_horizon</span><span class="token punctuation">:</span> <span class="token number">1000</span>
    <span class="token key atrule">summary_freq</span><span class="token punctuation">:</span> <span class="token number">2000</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/3e92b84562ec47d89485518d1b98b59f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">훈련 대한 공식 매뉴얼은 여기로</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/2c8c7413199d42b8b2a54c7bd58ca7a2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/Unity-Technologies/ml-agents/blob/main/docs/Training-ML-Agents.md">https://github.com/Unity-Technologies/ml-agents/blob/main/docs/Training-ML-Agents.md</a></span></span></li></ul></li><li id="https://www.notion.so/dc7f8317aece4bb0881249ed37ed64ab" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">아래와 같이 파이선 스크립트를 시작하고, 유니티를 플레이 하면 학습이 시작됩니다.</span></span></li></ul><pre id="https://www.notion.so/4b9db8b276d14eba9d5215b69a5eca9a" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span> <span class="token punctuation">(</span>AstroJump<span class="token punctuation">)</span>$ mlagents-learn trainer_config.yaml --run-id<span class="token operator">=</span>FirstTry01</span></span></span></code></pre><div id="https://www.notion.so/9d2f26390b784edeb66b3891f6c898cf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/e798a60087c9425c813d353f62631e02" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/e798a60087c9425c813d353f62631e02"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">문제 해결</span></span></h1><h2 id="https://www.notion.so/78583f742ee34223bcca98344d59d848" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/78583f742ee34223bcca98344d59d848"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">TypeError: Invalid first argument to </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">register()</code></span><span class="SemanticString">. typing.Dict[mlagents.trainers.settings.RewardSignalType, mlagents.trainers.settings.RewardSignalSettings] is not a class.</span></span></h2><div id="https://www.notion.so/bf477ede00fd40c9bbf102b9d1fec41c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">지금 Anaconda 설치하면 파이선 3.9.12가 설치되는데, 3.7 설치하면 이 에러가 해결됩니다. </span></span></p></div><div id="https://www.notion.so/01f56d33028e4b419aa7d3c9a49cf98b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">파이선 3.7을 사용하는 Anaconda 환경은 이렇게 생성하면 됩니다.</span></span></p></div><pre id="https://www.notion.so/9bc5923700e14c8785dfea2b9631624f" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>conda create -n AstroJump <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.7</span></span></span></span></code></pre><h2 id="https://www.notion.so/7cef636352204b56bebe3a418ac54189" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/7cef636352204b56bebe3a418ac54189"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">mlagents_envs.exception.UnityTimeOutException: The Unity environment took too long to respond. </span></span></h2><div id="https://www.notion.so/1cade26e93224190afea9f17eb26cb1e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">유니티와 잘 연결되었다는 로그가 나오는데도 잠시 후에 이런 에러가 나면서 종료한다면, 실제로 action이 발생하고 observation이 전달되고 있는지 로그를 찍어 보세요. 어떤 이유로든 observation이 발생하고 있지 않다면 위 에러가 나옵니다.</span></span></p></div><div id="https://www.notion.so/93a87726dff243ed87a8e9847bfe6350" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">저는 DecisionRequester를 안붙여서 action이 발생하지 않았어요.</span></span></p></div><h1 id="https://www.notion.so/93d8890b47cf40dfba12dea01364a84c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/93d8890b47cf40dfba12dea01364a84c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">학습 히스토리 (처음에 이런 게 어려웠구나 기록용)</span></span></h1><ul class="BulletedListWrapper"><li id="https://www.notion.so/ee4d57da569041da909605fc37be84e3" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">점프 잘하면  0.1, 벽이 아닌데 점프하면 -0.05. 160k 스텝을 해도 누적 0.3점을 넘기 어렵다. y위치와 차일드 센서만 썼음.</span></span></li><li id="https://www.notion.so/2625f3f23d324037abaef919d643c859" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">x 위치와 isOnWall, 마지막 클릭후 지난 시간을 observation에 추가했더니, 160k 스텝에 최대 1.5 까지도 나온다. 그러나 500k 에도 2.5 수준이다.</span></span></li><li id="https://www.notion.so/c45ebc147ebb4c4bb56f9e02b6ddbe9a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">장애물 넣고 테스트. 학습 그래프가 요동치고 점수가 잘 안올라가는 걸 보면 학습이 잘 안되고 있음. 그래도 마지막에 5.65 까지 나왔다.</span></span></li><li id="https://www.notion.so/90d9136eb4ff416ca23658ae903f35f1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">점프하지 않는 것에 대해 패널티를 부여했더니 조금 더 잘하는 것 같은데, 점수 체계가 바뀌니 수치적으로 판단할 방법이 없다. 텐서보드 그래프의 모습도 대조적인데 어떻게 해석해야할지 모르겠다.</span></span></li><li id="https://www.notion.so/56852703637e445fac64540ea864654e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">통과해야 하는 장애물을 넣고, velocity x, y도 관찰에 추가. 리워드는 이전 프레임보다 얼마나 올라갔나, 내려갔는가로 정했고. 장애물 천장에 부딪히면 -5라는 큰 패널티 줬음. 잘 안됨.</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/5c3887a50efe4e00bd2cf045a872de5c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">⇒ AddObservation()만 호출하고 BehaviourParameters에 Vector Observation Space Size를 늘리지 않았음. 잘못된 실험.</span></span></li></ul></li><li id="https://www.notion.so/c72b332de7c54044a60e97d6e7e28198" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">조금 밑으로 미끄러졌다고 점프하면 좋겠는데, 그거는 안되고 무조건 뛰기만 한다. 그래서 높이에 따른 보상은 1/10 해보았다. 그래도 결과는 비슷. 무조건 점프함.</span></span></li><li id="https://www.notion.so/ac0ad52f1df641f5941420c130cd7c42" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">차일드 센서에 Wall과 Door  태그를 분리해보았다. Door라는게 구분되면 뭔가 더 잘하지 않을까? 아니네.</span></span></li><li id="https://www.notion.so/4390c901b35c48c19576fad9c44b12ed" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">훈련 설정을 바꿔봄.</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/042e15eba49a4ab8956a4971be64c119" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">훈련이 불안정하고 보상이 늘지 않으면 hyperparameters &gt; learning_rate를 낮춰보라고 함.</span></span></li><li id="https://www.notion.so/a7b0ba9458a347e5b30f8e0ab6edf780" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">entropy가 급격이 떨어지면 beta를 늘려보라고 함.</span></span></li><li id="https://www.notion.so/57de94db18d646f790dc8d3cae9b38ea" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">점프와 장애물 통과 사이에 시간간격이 있으므로 액션과 보상의 시간차에 따른 디스카운트 값인 reward_signals &gt; extrinsic &gt; gamma를 높여봄</span></span></li><li id="https://www.notion.so/e785e436ad4a45198717286bfe4580e8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">엔트로피는 기존보다 조금 완만한게 하강하지만 여전히 학습은 불안정함</span></span></li></ul></li></ul><h1 id="https://www.notion.so/d34457146f5e45feafb753eabe09f746" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/d34457146f5e45feafb753eabe09f746"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">느낀점</span></span></h1><ul class="BulletedListWrapper"><li id="https://www.notion.so/f4d4cf4803df4608b025f04fb4b02c78" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">얕은 지식으로 흉내는 낼 수 있지만 효과적으로 하기는 어렵다</span></span></li><li id="https://www.notion.so/8d0164770c454516be59b4f39a7a83d7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">유니티 샘플 보면서 다양한 상황에서 어떻게 설정하고 구현하는지 봐야겠다</span></span></li><li id="https://www.notion.so/90bcb25452d84e3a9fae9df6d2ca3fe7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">머신러닝 + 강화학습 이론 공부를 해야겠다</span></span></li><li id="https://www.notion.so/cdf474ee7b75493b82417fe4edfee77c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">잘만 쓴다면 적용할 수 있는 곳이 많을 것 같다</span></span></li></ul></article>
    
  <script src="https://utteranc.es/client.js"
        repo="muscly/utterances"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
  </script>
    
  <footer class="Footer">
  <div>&copy; No Secret Wiki Database 2019-2021</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>
