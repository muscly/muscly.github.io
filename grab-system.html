<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🤫&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3B8EKKV9YC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3B8EKKV9YC');
</script>

  <title>AR 그랩 시스템 ,b,&nbsp;|&nbsp;Secret Wiki</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="AR 그랩 시스템 ,b,">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🤫&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="happiness .html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>행복</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👨‍💻&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <h1 class="Header__Title">AR 그랩 시스템 ,b,</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Wed, Nov 13, 2019</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--pink">
            <a href="tag/아들과 2인개발.html">아들과 2인개발</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--yellow">
            <a href="tag/URP.html">URP</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--default">
            <a href="tag/유니티3D.html">유니티3D</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/daf5222d5e964c5890ab630bb377530b" class="PageRoot"><div id="https://www.notion.so/e7dea5c7c07848fab40220af1969b4d8" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F317ec38c-8519-4495-9372-4f7e902cf9da%2FUntitled.png?width=696&amp;table=block&amp;id=e7dea5c7-c078-48fa-b402-20af1969b4d8"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F317ec38c-8519-4495-9372-4f7e902cf9da%2FUntitled.png?width=696&amp;table=block&amp;id=e7dea5c7-c078-48fa-b402-20af1969b4d8" style="width:696px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/5ec1a21275284f34b1fa34889b59fc94" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">오랜만의 개발기록 입니다. 그랩 시스템을 넣으면서 게임의 기반도 준비해야 해서 시간이 오래 걸리게 되었네요. 또, AD 님이 자기가 그리고 싶은 그림만 그리는 성향이라 일부 원화가 확보되지 않아서 시간이 걸린 부분도 있습니다. </span></span></p></div><div id="https://www.notion.so/ac7e14c0f8d247d3af028934ab7ab8b8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">그래도 AD 님은 계속 원화를 그리고 있고, 게임 아이디어도 지속해서 내고 있습니다. 아무래도 7살이다 보니 엉덩이 관련 아이템을 넣고 싶은 욕심이 많기는 한데, 계속 설득하면서 갈등을 풀어나가고 있습니다.</span></span></p></div><div id="https://www.notion.so/127f3044a7bb4af6bfccedd3d1df43e4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">AD님이 최근에 그린 원화 몇 장 보고 시작하시죠. 몬스터를 꼬실 때 쓸 과일과 배경을 꾸밀 때 필요한 프랍, 해양생물입니다.</span></span></p></div><div id="https://www.notion.so/9e11dcbe84d74e36af94b940269e201d" class="Embed"><div class="Embed__Content"><div class="Embed__ResponsiveContainer" style="width:432px;height:357px"><iframe src="https://embed.notion-tools.com/block/html/?c=%3Cscript%20async%20defer%20src%3D%22%2F%2Fassets.pinterest.com%2Fjs%2Fpinit.js%22%3E%3C%2Fscript%3E%0A%3Ca%20data-pin-do%3D%22embedBoard%22%20data-pin-lang%3D%22ko%22%20data-pin-board-width%3D%22400%22%20data-pin-scale-height%3D%22240%22%20data-pin-scale-width%3D%2280%22%20href%3D%22https%3A%2F%2Fwww.pinterest.co.kr%2Fcodingdad%2Fgamedevwithson-wip-fruits-props%2F%22%3E%3C%2Fa%3Ent" sandbox="allow-scripts allow-popups allow-forms allow-same-origin" allowfullscreen=""></iframe></div></div><p class="Embed__Caption"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/422bc32b8b53418fb7b0117a63edda9c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">그동안 작업한 내용을 주제별로 3가지 포스팅으로 나누려고 생각 중입니다. 이 포스팅은 그랩 시스템의 구현과 렌더링에 관해 설명하려고 합니다. 우선 그랩 시스템 동영상을 보시죠.</span></span></p></div><div id="https://www.notion.so/7e5f6b49115a4c11a64703b72da9534c" class="Embed"><div class="Embed__Content"><div class="Embed__ResponsiveContainer" style="width:854px;padding-bottom:56.20608899297424%"><iframe src="https://www.youtube.com/embed/xF1cbvvLJZE?feature=oembed" sandbox="allow-scripts allow-popups allow-forms allow-same-origin" allowfullscreen=""></iframe></div></div><p class="Embed__Caption"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/009ce9e268874d5db952255f6099a3f8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/009ce9e268874d5db952255f6099a3f8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">그랩 시스템 구현</span></span></h1><div id="https://www.notion.so/a4780906871648f8951acc99e378ac26" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">그랩 시스템의 기능을 정리하면 이렇습니다.</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/8d80e45b8c394d42a3d1cd5660eb7c17" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">눈앞에 잡을 수 있는 물체가 있는지 판단하기</span></span></li><li id="https://www.notion.so/8345ad29a32a4aecab6cbfdfd392f829" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">잡은 후에 이리저리 이동시키기</span></span></li><li id="https://www.notion.so/4ac467889c8b4152aed3e9d6f2413223" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">이동 시 장애물 피하기</span></span></li><li id="https://www.notion.so/d937767bfefc4254b09a89dbb2acb537" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">물체를 붙일 수 있는지 판단하기</span></span></li><li id="https://www.notion.so/cf0e99e8edce44de84ee321d5def2ca4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">물체를 붙였다 떼기</span></span></li><li id="https://www.notion.so/400ddb1af24e4004a669cf9e7db16bff" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">놓아주기</span></span></li></ul><div id="https://www.notion.so/124d1df7f0f14e918bdb236e492de2c1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">하나씩 살펴보면 전체 시스템의 구현 방식을 이해할 수 있을 것 같습니다.</span></span></p></div><h3 id="https://www.notion.so/80cbb561d6994196a27752fbfca2bd3a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/80cbb561d6994196a27752fbfca2bd3a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">눈앞에 잡을 수 있는 물체가 있는지 판단하기</strong></span></span></h3><div id="https://www.notion.so/e7196ed6a8e24bf7ad3325096acceea2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">잡을 수 있는 물체가 있는지 판단하기 위해서는 물리엔진의 Raycast를 사용했습니다. 특히 입체감있는 잡기를 위해서 SphereCast를 사용했습니다. 여기에 추가로, 물체에 Grabbable 컴포넌트가 붙어있는지도 여부도 검사했습니다. Grabbable은 잡을 수 있는 물체인지를 판단하는 용도로도 쓰이지만, 물체의 센터 포인트를 미리 설정하거나, 잡혔을 때의 이펙트와 관련된 정보를 넣어두는 용도로도 사용합니다.</span></span></p></div><h3 id="https://www.notion.so/6693bce4e06249078f12528840b1f4a3" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/6693bce4e06249078f12528840b1f4a3"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">잡은 후에 이리저리 이동시키기</strong></span></span></h3><div id="https://www.notion.so/63d15bbaa13f48cb8082060fe2dce6c0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">처음에는 간단하게 카메라의 자식으로 붙여서 구현하려고 했습니다. 카메라가 이동하거나 회전할 때 알아서 따라다니니까요. 그런데 잡아끄는 손맛을 내기 위해서 이동을 지연시키니 오히려 방해되어서, 트랜스폼을 직접 계산하는 식으로 변경했습니다.</span></span></p></div><div id="https://www.notion.so/dd122585c34c409f91a622fb735744e3" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fea63dfdf-79b3-480a-a692-71dd723dc973%2FUntitled.png?width=512&amp;table=block&amp;id=dd122585-c34c-409f-91a6-22fb735744e3"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fea63dfdf-79b3-480a-a692-71dd723dc973%2FUntitled.png?width=512&amp;table=block&amp;id=dd122585-c34c-409f-91a6-22fb735744e3" style="width:512px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">이동의 기본 개념</em></span></span></figcaption></figure></div><div id="https://www.notion.so/46c0bd94d00d4a8f9a457b08894f087d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">기본 개념은 카메라가 이동하거나 회전하더라도 처음 잡았을 때의 거리와 회전을 유지하는 것입니다. 거리를 유지하기 위해서는 최초의 거리를 저장해두었다가, 매 프레임 카메라 트랜스폼의 forward 벡터 방향으로 거리만큼 떨어진 곳에 위치시킵니다. 회전도 마찬가지로 최초 카메라의 로테이션을 저장해두었다가, 그 이후에 카메라가 회전한 만큼 물체도 회전시키면 됩니다. 이렇게 해야 물체가 처음 카메라를 바라보던 그 면이 계속해서 카메라를 바라보게 됩니다.</span></span></p></div><div id="https://www.notion.so/56ef25e5fd7f486f9a4206b73b87aaae" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F48a512a3-06af-4d72-9727-824f40eae0e9%2FUntitled.png?width=512&amp;table=block&amp;id=56ef25e5-fd7f-486f-9a42-06b73b87aaae"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F48a512a3-06af-4d72-9727-824f40eae0e9%2FUntitled.png?width=512&amp;table=block&amp;id=56ef25e5-fd7f-486f-9a42-06b73b87aaae" style="width:512px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">Lerp를 사용한 이동 딜레이</em></span></span></figcaption></figure></div><div id="https://www.notion.so/869ffa09118645eda0833299b023af6b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">그런데 이렇게만 하면 잡아끄는 손맛이 부족해서 이동을 조금 지연시켰습니다. 지연은 간단하게 물체의 현재 위치와 가야 할 곳 사이를 Lerp를 통해 보간해주었습니다. 사실 Lerp를 Update 이벤트에서 하면 FPS에 따라서 지연의 정도가 달라지는 문제점이 있습니다. FixedUpdate에서 하면 문제가 해결되기는 하지만, 뒤에서 설명하는 것처럼 끊김이 발생할 수 있어서 우선은 Update에서 수행하고 있습니다. 나중에 기기 테스트 하면서 보정을 하려고 생각하고 있습니다.</span></span></p></div><div id="https://www.notion.so/66fa810250474d678bc9d43c01b40c55" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">마지막으로, 두둥실 떠 있는 느낌을 주기 위해서 물체가 위아래로 움직이도록 했습니다. AnimationCurve를 노출해서 두둥실의 느낌을 설정할 수 있게 하고, 움직이는 폭은 카메라와의 거리에 따라 조절되도록 했습니다. 안 그러면 물체가 카메라와 가까워졌을 때 너무 많이 움직이게 됩니다.</span></span></p></div><div id="https://www.notion.so/62d89f8967eb4ef6944c185346f14f9f" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fdae7f5d8-c85b-4e2a-ad9a-2d8bddb6a821%2FGrab_Oscillation.webp?width=419&amp;table=block&amp;id=62d89f89-67eb-4ef6-944c-185346f14f9f"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fdae7f5d8-c85b-4e2a-ad9a-2d8bddb6a821%2FGrab_Oscillation.webp?width=419&amp;table=block&amp;id=62d89f89-67eb-4ef6-944c-185346f14f9f" style="width:419px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/6985005d789346879b723bc91aec3a1c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/6985005d789346879b723bc91aec3a1c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">이동 시 장애물 피하기</strong></span></span></h3><div id="https://www.notion.so/773c5bc76ba347e5b758d31e53e0a6dc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">장애물을 탐지에도 SphereCast를 사용합니다. 장애물 앞쪽으로 물체가 오도록 카메라와의 거리를 조절합니다.</span></span></p></div><div id="https://www.notion.so/b32cf13f17604388a72a4694e0f60250" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3f62dbaf-6214-4ef9-b147-72f327c04a79%2FUntitled.png?width=512&amp;table=block&amp;id=b32cf13f-1760-4388-a72a-4694e0f60250"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3f62dbaf-6214-4ef9-b147-72f327c04a79%2FUntitled.png?width=512&amp;table=block&amp;id=b32cf13f-1760-4388-a72a-4694e0f60250" style="width:512px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">장애물 피하기</em></span></span></figcaption></figure></div><h3 id="https://www.notion.so/a82b1d80a46b427b989ecc981a4853a0" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/a82b1d80a46b427b989ecc981a4853a0"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">물체를 붙일 수 있는지 판단하기</strong></span></span></h3><div id="https://www.notion.so/72bac4793e4447f3b07826b8cc3b70ad" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">다시 한 번 SphereCast를 통해서 물체를 붙일 수 있는지 판단합니다. 이 때는 물체에 DroppablePlace 컴포넌트가 붙어있는지 추가로 확인합니다. DroppablePlace 컴포넌트는 물체의 트랜스폼을 조절하기 위한 코드와 설정이 들어있습니다. 예를 들어, 물체가 붙을 때의 로컬 포지션과 로테이션 설정을 가지고 있고, 붙어있는 상태가 바뀔때 호출되는 이벤트도 가지고 있습니다. (이 이벤트를 활용해서 물고기에 물체가 붙었다 떨어질때마다 물고기의 애니메이션을 껐다 켰다 합니다.)</span></span></p></div><h3 id="https://www.notion.so/78b7458350c64a76b00c71536088d735" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/78b7458350c64a76b00c71536088d735"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">물체를 붙였다 떼기</strong></span></span></h3><div id="https://www.notion.so/f07c122be52840e6a4c057ec7c1cd90d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">물체를 붙였다 뗄 때는 DroppablePlace 컴포넌트에 물체의 소유권을 넘겨주는 방식으로 구현했습니다. DroppablPlace 쪽에서 자유롭게 물체의 위치와 회전을 만질 수 있도록 설계를 했고, 뗄 때는 다시 소유권을 돌려받아서 기존의 물체 이동 코드가 위치와 회전을 관리하도록 했습니다.</span></span></p></div><h3 id="https://www.notion.so/b7395f96483b4cdb800a966e7195e4b1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b7395f96483b4cdb800a966e7195e4b1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">성능 이슈</strong></span></span></h3><div id="https://www.notion.so/441732816b9b4e1ea9f49179318dcb24" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">마지막으로 최적화와 관련하여 첨언을 하면, 기본적으로 물체의 상태나 종류별로 다른 레이어를 사용합니다. 물체는 처음에 Mob이나 Item 레어어였다가, 이동 중에는 GrabbedItem으로 바뀝니다. 장애물은 Mob, Item, Background 등이고, 붙일 수 있는 곳은 Droppable 레이어 입니다. Raycast를 할 때는 상황에 맞추어 꼭 필요한 레이어만 마스킹해서 실행을 하고, 불필요한 Raycast도 수행하지 않도록 꼼꼼하게 확인합니다. 예를 들어 잡는 중이 아니라면 장애물이나 붙일 수 있는 곳을 검사할 필요가 없고, 어딘가에 붙어 있다면 장애물이 있는지 검사할 필요가 없습니다.</span></span></p></div><div id="https://www.notion.so/42f58fb56caf40f58c20825a6add3edf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">또, 프로젝트 생성 시 기본 물리프레임은 50인 반면에 업데이트/렌더링 프레임은 성능에 따라 60프레임까지 나올 수 있어서 물리 프레임에서 Raycast와 물체 이동을 수행해서 성능 향상을 꾀해볼 수도 있겠지만, 실제로는 렌더링 프레임과 물체의 이동 프레임이 맞지 않으면 움직이다 말다 하는 것이 보여서 부자연스러운 결과가 나옵니다.</span></span></p></div><div id="https://www.notion.so/a80b048df43e43c1909e7ff0de033519" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">어쨌든 아직 제대로 프로파일링해본 것이 아니라서 이후에 최적화를 위해 수정되는 부분이 있을 것 같습니다. 중요한 최적화 포인트가 발생하면 다시 공유하겠습니다.</span></span></p></div><h1 id="https://www.notion.so/3707727869bb4e3db0aac47d86a1e762" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/3707727869bb4e3db0aac47d86a1e762"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">렌더링 방식</span></span></h1><div id="https://www.notion.so/76d6f05df9784f749c0c929181347d5b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">렌더링에서 얘기할 만한 것은 아래와 같습니다.</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/d215837d1642422f8494ae0b3e5c5b6e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">휘어지는 레이저의 구현</span></span></li><li id="https://www.notion.so/34e982560b37419aa65e3c276880f28e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">레이저의 끝을 물체의 외곽과 일치시키는 방법</span></span></li><li id="https://www.notion.so/5a8b7b6f9bfb48b6830ed793a010ee7a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">레이저 셰이더 구현</span></span></li><li id="https://www.notion.so/3773ee9213974ff08c3e9c0f3fd8d26f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">비주얼 이펙트 그래프의 스케일</span></span></li><li id="https://www.notion.so/3eb628570f1f498895f5033cdbbaeff5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">선택 이펙트</span></span></li></ul><div id="https://www.notion.so/b937b50ed9254e5f90848bc5d0c6e31c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">하나씩 살펴보겠습니다.</span></span></p></div><h3 id="https://www.notion.so/ef11c2b2e57745f09386281fd4214321" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ef11c2b2e57745f09386281fd4214321"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">휘어지는 레이저의 구현</strong></span></span></h3><div id="https://www.notion.so/d5ef76a68b8a40e798af0efca55ff058" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">앞에서 잡아끄는 손맛을 위해서 이동을 지연시켰는데, 그 지연된 차이를 베지어 곡선을 사용해서 연결했습니다. 베지어 곡선은 아래와 같이 최소 4개의 제어 포인트를 사용해서 곡선을 만드는 방식입니다.</span></span></p></div><div id="https://www.notion.so/84093a5f7fdf4f5d868d0068b93bb6a2" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa0c110a7-463d-4486-8139-e0b524db876a%2FUntitled.png?width=512&amp;table=block&amp;id=84093a5f-7fdf-4f5d-868d-0068b93bb6a2"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa0c110a7-463d-4486-8139-e0b524db876a%2FUntitled.png?width=512&amp;table=block&amp;id=84093a5f-7fdf-4f5d-868d-0068b93bb6a2" style="width:512px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">베지어 곡선</em></span></span></figcaption></figure></div><div id="https://www.notion.so/326c269795284c0eb34157be3b2355d5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">그랩 시스템에서는 P0와 P3를 각각 카메라와 물체의 위치로 잡고, P1을 원래 물체가 있어야 할 곳의 절반 위치 정도로 잡았습니다. P2는 P3와 같게 잡았습니다.</span></span></p></div><div id="https://www.notion.so/991a7fa179494dfdb30a5f312e0deae6" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F728e6dcd-c77d-4eb4-8ed1-bcd04aad0e62%2FUntitled.png?width=512&amp;table=block&amp;id=991a7fa1-7949-4dfd-b30a-5f312e0deae6"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F728e6dcd-c77d-4eb4-8ed1-bcd04aad0e62%2FUntitled.png?width=512&amp;table=block&amp;id=991a7fa1-7949-4dfd-b30a-5f312e0deae6" style="width:512px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">베지어 곡선을 활용한 휘어지는 레이저</em></span></span></figcaption></figure></div><div id="https://www.notion.so/f7d81123b5ba4aeab2eaf434cb4febdb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">현재는 10개의 포인트를 사용해서 위의 베지어 곡선을 표현하고 있고, LineRenderer를 사용해서 그리고 있습니다. 베지어 곡선은 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://gist.github.com/afaq125/901fbf80d40c87c66b7c">이곳</a></span><span class="SemanticString">의 코드를 수정해서 사용했습니다.</span></span></p></div><h3 id="https://www.notion.so/e1f2c2195b0643d5a7fccac62e8634e7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/e1f2c2195b0643d5a7fccac62e8634e7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">레이저의 끝을 물체의 외곽과 일치시키는 방법</strong></span></span></h3><div id="https://www.notion.so/c5bb9b3c008e4410a01882f0df4c094b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">레이저와 물체의 접점을 보면 동그란 이펙트가 하나 붙어있습니다. 이 이펙트를 어색하지 않게 보여주려면 가능한 한 정확하게 접점의 위치를 파악해야 합니다. 레이저가 요리조리 휘다 보니 어림짐작으로 오프셋 값만 주어서는 어색한 상황이 연출됩니다.</span></span></p></div><div id="https://www.notion.so/28f259550b1e4a898974185e0f106c09" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">처음에는 물체의 중앙점을 베지어 곡선의 끝(P3)으로 사용하다 보니 정확하게 이 지점을 찾는 것이 어려웠습니다. (심각하게 들어가면 베지어 곡선과 메시 콜라이더와의 충돌 점을 찾아야만 하는..)</span></span></p></div><div id="https://www.notion.so/b3a87a9e9a744b6a82327042e94d6749" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">그래서 처음에 물체를 잡기 위해서 Raycast 했을 때 히트된 위치를 베지어 곡선의 끝(P3)으로 사용하도록 바꿨습니다. 마치 히트 포인트가 물체의 피벗인 것처럼 다뤘습니다. 이를 위해서 이 위치를 피벗으로 하는 부모 트랜스폼을 하나 만들고 붙잡힌 물체를 자식으로 넣었습니다. 굳이 트랜스폼을 만들지 않고 매번 계산에 포함하는 방법도 있지만, 그랩 시스템 외부와 소통할 때는 순수하게 트랜스폼을 알려주는 것이 간단해서 그렇게 설계했습니다.</span></span></p></div><div id="https://www.notion.so/0dfb5e70526f487994528f07d021d2e5" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7e87d1e4-0687-4b89-9953-f00fa26ffb00%2FUntitled.png?width=512&amp;table=block&amp;id=0dfb5e70-526f-4879-9452-8f07d021d2e5"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7e87d1e4-0687-4b89-9953-f00fa26ffb00%2FUntitled.png?width=512&amp;table=block&amp;id=0dfb5e70-526f-4879-9452-8f07d021d2e5" style="width:512px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">히트 포인트를 피벗으로 사용</em></span></span></figcaption></figure></div><div id="https://www.notion.so/26af5698de184d6882156c967ce6c050" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">레이저 셰이더 구현</strong></strong></span></span></p></div><div id="https://www.notion.so/ca1f84d5cda64562b3ba9368628dd014" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3822f3b0-a014-4484-90f6-5cf7ab5f9dfb%2FGrabLaser.webp?width=480&amp;table=block&amp;id=ca1f84d5-cda6-4562-b3ba-9368628dd014"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3822f3b0-a014-4484-90f6-5cf7ab5f9dfb%2FGrabLaser.webp?width=480&amp;table=block&amp;id=ca1f84d5-cda6-4562-b3ba-9368628dd014" style="width:480px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/9dd2b104d30c469994293a1150bb680c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">레이저 셰이더는 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.youtube.com/watch?v=mGd3nYXj1Oc">이곳</a></span><span class="SemanticString">을 참고해서 만들었습니다. 기본적으로 UV 애니메이션이고, 다른 속도로 애니메이션되는 노이즈를 섞어주어서 UV 패턴이 잘 보이지 않도록 하는 방식입니다. 아래의 셰이더 그래프로 구현했습니다.</span></span></p></div><div id="https://www.notion.so/cfb8c6aa35734a31ab305fccd1eec13b" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F813072b4-0e09-490c-b1cc-b33ac3ff87dc%2FUntitled.png?width=696&amp;table=block&amp;id=cfb8c6aa-3573-4a31-ab30-5fccd1eec13b"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F813072b4-0e09-490c-b1cc-b33ac3ff87dc%2FUntitled.png?width=696&amp;table=block&amp;id=cfb8c6aa-3573-4a31-ab30-5fccd1eec13b" style="width:696px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">레이저 셰이더 그래프</em></span></span></figcaption></figure></div><div id="https://www.notion.so/7c54a1bdabf94aeab8eea85fb335578f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">라인렌더러에서 만드는 버텍스 칼라를 활용하려고 Sprite Unlit Master를 사용하기는 했는데 HDR 범위의 색상을 반환할 수 없는 느낌입니다. 좀 밝게 하려고 ColorScale 파라미터를 넣어서 올려보았더니 밝은 부분이 검은색으로 나와서 우선은 Saturate로 막아두었습니다. 나중에 HDR 범위의 색상을 반환할 수 있게 하고 Bloom을 적용할 계획입니다.</span></span></p></div><h3 id="https://www.notion.so/afccfc3f5bcd4336a47ee680b50b004e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/afccfc3f5bcd4336a47ee680b50b004e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">비주얼 이펙트 그래프의 스케일</strong></span></span></h3><div id="https://www.notion.so/036de297df7d47fda56040ad26769ac5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">레이저와 물체가 만나는 부분의 이펙트는 기본 파티클 스프라이트를 사용한 아주 간단한 이펙트입니다. 이번에 처음으로 비주얼 이펙트 그래프를 써봤는데, 폰에 올려서 보니 에디터보다 10배 정도 크게 보이는 문제가 있었습니다.</span></span></p></div><div id="https://www.notion.so/2e26a82c6575425998ebdc2c407a1bdf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">아직 제대로 공부해 본 적이 없어서 뭔가 간단한 실수를 한 걸 수도 있을 것 같지만, 인터넷을 찾아봐도 별다른 얘기가 없어서 우선은 스케일 파라미터를 노출해서 모바일에서만 1/10 크기로 설정해서 해결했습니다.</span></span></p></div><div id="https://www.notion.so/447bc7191838489793ee75292330bc81" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fca411594-bdbb-4673-b306-e954c1dc3f4c%2FUntitled.png?width=696&amp;table=block&amp;id=447bc719-1838-4897-93ee-75292330bc81"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fca411594-bdbb-4673-b306-e954c1dc3f4c%2FUntitled.png?width=696&amp;table=block&amp;id=447bc719-1838-4897-93ee-75292330bc81" style="width:696px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">비주얼 이펙트 그래프의 스케일</em></span></span></figcaption></figure></div><h3 id="https://www.notion.so/fd2d74ef1e904d97b04fb56e53329411" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/fd2d74ef1e904d97b04fb56e53329411"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">선택 이펙트</strong></span></span></h3><div id="https://www.notion.so/c6fe3820495a49d98ccbd02c0ff4fbd2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">물체가 잡혔을 때는 림라이트와 함께 외곽선을 그려주었습니다. 아무래도 각진 큐브 형태의 메시는 림라이트의 효과가 잘 보이지 않아서, 외곽선을 같이 그려주어야 눈에 좀 보이는 편입니다.</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://willweissman.wordpress.com/tutorials/shaders/unity-shaderlab-object-outlines/">이런</a></span><span class="SemanticString"> 느낌의 부드러운 Glow 효과를 주고 싶지만, 타일 기반 GPU를 쓰는 모바일 환경에서는 전체 화면을 그리는 부하가 너무 커서 버텍스를 확장하는 방식의 외곽선을 사용했습니다. (예전에 만들어 둔 것도 있고..) Universal Render Pipeline에서 외곽선을 그리는 방법에 대해서는 아래의 포스팅을 참고해주세요.</span></span></p></div><div id="https://www.notion.so/25b1878bc610478fa13401289dff715f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Resource"><a href="toon-shading-universalrp.html"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Universal RP로 구현한 툰 셰이딩</strong></span></span></a></span></span><span class="SemanticString"> </span></span></p></div><div id="https://www.notion.so/5a0874c5d5964b4682e6d513a29eb5a5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Resource"><a href="linq-smoothing-normals.html"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Linq로 부드러운 노멀 벡터 구하기에 도전</strong></span></span></a></span></span><span class="SemanticString"> </span></span></p></div><h1 id="https://www.notion.so/ef235ce59cb84f949e5542575d3b30a6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/ef235ce59cb84f949e5542575d3b30a6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">마치며…</span></span></h1><div id="https://www.notion.so/e1f5a82686aa45bc84fa99f6eae92c80" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">게임을 만들다보면 디테일을 살리기 위해서 정신없이 폴리싱을 하는 단계가 오는 것 같습니다. (구현을 하나 더 할지 폴리싱을 조금 더 할지 늘 갈등하지요.) 포스팅에 적은 것 외에도 쫀득한 맛을 살려보려고 이것저것 시도했다가 실패해서 소개도 못 한 것들이 많은데, 그 과정이 힘들고 허무하기는 하지만 조금씩 조금씩 좋아지다가 어느 순간 게임다운 모습이 되는 것을 지켜보는 맛에 자꾸만 그 과정을 반복하는 것 같습니다. 현재 구현도 폴리싱의 손길을 더 주어야 하지만, 우선은 다음 진도를 나가기 위해서 한 번 끊고 가는 수 밖에요.이번 포스트에서 말씀드릴 부분은 이 정도입니다. 다음번에는 실행시간에 글자를 텍스쳐로 만들어서 물고기와 큐브 아이템에 데칼로 붙이는 포스팅과 컴포넌트 설계방향 및 게임오브젝트 관리에 관한 포스팅을 계획하고 있습니다. </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://twitter.com/mycodingdad">트위터</a></span><span class="SemanticString">와 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.facebook.com/codingdad">페이스북</a></span><span class="SemanticString"> 팔로우 하시면 놓치지 않고 보실 수 있습니다.</span></span></p></div><div id="https://www.notion.so/b808ecd892d14a2883776c48ae22e206" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">마지막으로 AR 환경에서 테스트하는 영상 보면서 마치겠습니다. 긴 글 읽어 주셔서 고맙습니다.</span></span></p></div><div id="https://www.notion.so/e9c575fbeb344bde9c4b222fa6eb64d9" class="Embed"><div class="Embed__Content"><div class="Embed__ResponsiveContainer" style="width:854px;padding-bottom:56.20608899297424%"><iframe src="https://www.youtube.com/embed/Ros_O-G4jxQ?feature=oembed" sandbox="allow-scripts allow-popups allow-forms allow-same-origin" allowfullscreen=""></iframe></div></div><p class="Embed__Caption"><span class="SemanticStringArray"></span></p></div></article>
    
  <script src="https://utteranc.es/client.js"
        repo="muscly/utterances"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
  </script>
    
  <footer class="Footer">
  <div>&copy; Secret Wiki 2019-2021</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>
